system: Splitstore
subsystem: Splitstore
features:
  - name: Open
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_OPEN_001
        description: |
          Given badger options 'opts', returns a new splitstore with the settings
          configured according to the options
  - name: Close
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_CLOSE_001
        description: |
          Closes the splitstore
  - name: View
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_VIEW_001
        description: |  
          Given a context 'ctx', CID 'cid', and a view function 'fn', return read-only value from the splitstore
      - id: SPLITSTORE_SPLITSTORE_VIEW_002
        description: |  
          In case the block with 'cid' could not be found, return an error
  - name: Has
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_HAS_001
        description: |  
          Given a context 'ctx', CID 'cid', return true if the block with 'cid' is present in the splitstore
      - id: SPLITSTORE_SPLITSTORE_HAS_002
        description: |  
          In case checking for the block's presence fails, return an error
  - name: Get
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_GET_001
        description: |  
          Given a context 'ctx', CID 'cid', return a block from the splitstore
      - id: SPLITSTORE_SPLITSTORE_GET_002
        description: |  
          In case the block with 'cid' is not found, return an error
  - name: Get size
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_GET_SIZE_001
        description: |  
          Given a context 'ctx', CID 'cid', return a block's size from the splitstore
      - id: SPLITSTORE_SPLITSTORE_GET_SIZE_002
        description: |  
          In case the block with 'cid' is not found, return an error
  - name: Put
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_PUT_001
        description: |  
          Given a context 'ctx', and a block 'block', add the block to the splitstore
          under its CID.
  - name: Put many
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_PUT_MANY_001
        description: |  
          Given a context 'ctx', and a list of blocks 'blocks', add each block to the splitstore
          under its CID.
  - name: All keys channel
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_ALL_KEYS_CHAN_001
        description: |  
          Given a context 'ctx', return a channel which will return all keys present in 
          the splitstore.
  - name: Add protector
    behaviors:
      - id: SPLITSTORE_SPLITSTORE_ADD_PROTECTOR_001
        description: |  
          Given a protector function 'protector', add the function to the list of protectors