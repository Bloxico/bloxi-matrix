system: chain
subsystem: Store
description: Generic implementation of the Store interface
features:
  - name: Load
    behaviors:
      - id: CHAIN_STORE_LOAD_001
        description: |
          Rebuilds the Store's caches by traversing backwards.
          Does not validate state transitions.
  - name: Load tipset metadata
    behaviors:
      - id: CHAIN_STORE_LOAD_METADATA_001
        description: |
          Given a tipset,
          loads tipset status (state root and receipts)
  - name: Tipsets iterator
    behaviors:
      - id: CHAIN_STORE_ITERATOR_001
        description: |
          Given a tipset to start from, and a number,
          return an iterator over tipsets from head to genesis
  - name: Get tipset by height
    behaviors:
      - id: CHAIN_STORE_GET_TIPSET_BY_HEIGHT_001
        description: |
          Given a tipset, an epoch, and a prev flag,
          look back and return a tipset at the specified epoch.
      - id: CHAIN_STORE_GET_TIPSET_BY_HEIGHT_002
        description: |
          If the epoch is greater than the tipset's height,
          return an error.
      - id: CHAIN_STORE_GET_TIPSET_BY_HEIGHT_003
        description: |
          If an error occurs retrieving the tipset from the chain index,
          return an error.
      - id: CHAIN_STORE_GET_TIPSET_BY_HEIGHT_004
        description: |
          If an error occurs retrieving the tipset from the chain index
          (without accessing the index cache), return an error.